<!-- Executive Summary ì»´í¬ë„ŒíŠ¸ -->
<section class="executive-summary">
    <h2>ğŸ“‹ ê²½ì˜ì§„ ìš”ì•½</h2>
    
    <!-- ì‹¬ê°ë„ë³„ ì•Œë¦¼ ë°•ìŠ¤ -->
    {% if severity == 'critical' %}
    <div class="alert alert-critical">
        <div class="alert-icon">ğŸš¨</div>
        <div class="alert-content">
            <h3>{{ alert_title | default('ì¹˜ëª…ì  ë³´ì•ˆ ë¬¸ì œ ë°œê²¬') }}</h3>
            <p>{{ alert_message }}</p>
        </div>
    </div>
    {% elif severity == 'warning' %}
    <div class="alert alert-warning">
        <div class="alert-icon">âš ï¸</div>
        <div class="alert-content">
            <h3>{{ alert_title | default('ë³´ì•ˆ ë¬¸ì œ ë°œê²¬') }}</h3>
            <p>{{ alert_message }}</p>
        </div>
    </div>
    {% elif severity == 'success' %}
    <div class="alert alert-success">
        <div class="alert-icon">âœ…</div>
        <div class="alert-content">
            <h3>{{ alert_title | default('ë³´ì•ˆ ìƒíƒœ ì–‘í˜¸') }}</h3>
            <p>{{ alert_message }}</p>
        </div>
    </div>
    {% else %}
    <div class="alert alert-info">
        <div class="alert-icon">â„¹ï¸</div>
        <div class="alert-content">
            <h3>{{ alert_title | default('ë³´ì•ˆ ë¶„ì„ ì™„ë£Œ') }}</h3>
            <p>{{ alert_message }}</p>
        </div>
    </div>
    {% endif %}

    <!-- ë¹„ì¦ˆë‹ˆìŠ¤ ì˜í–¥ ë©”íŠ¸ë¦­ -->
    <div class="impact-metrics">
        <h4>ë¹„ì¦ˆë‹ˆìŠ¤ ì˜í–¥ ì§€í‘œ</h4>
        <div class="metrics-grid">
            <div class="metric-card {{ 'critical' if user_loss_rate > 50 else 'warning' if user_loss_rate > 20 else 'normal' }}">
                <div class="metric-number">{{ "%.0f"|format(user_loss_rate) }}%</div>
                <div class="metric-label">ì˜ˆìƒ ì‚¬ìš©ì ì´íƒˆë¥ </div>
                <div class="metric-detail">{{ "%.0f"|format(lost_users_daily) }}ëª…/ì¼ ì†ì‹¤</div>
            </div>
            
            <div class="metric-card {{ 'critical' if annual_loss > 100000000 else 'warning' if annual_loss > 50000000 else 'normal' }}">
                <div class="metric-number">{{ format_currency(annual_loss) }}</div>
                <div class="metric-label">ì—°ê°„ ì˜ˆìƒ ì†ì‹¤</div>
                <div class="metric-detail">{{ format_currency(monthly_loss) }}/ì›”</div>
            </div>
            
            <div class="metric-card {{ 'critical' if seo_impact > 30 else 'warning' if seo_impact > 15 else 'normal' }}">
                <div class="metric-number">-{{ "%.0f"|format(seo_impact) }}%</div>
                <div class="metric-label">ê²€ìƒ‰ ìˆœìœ„ í•˜ë½ ì˜ˆìƒ</div>
                <div class="metric-detail">ìœ ê¸°ì  íŠ¸ë˜í”½ ê°ì†Œ</div>
            </div>
            
            <div class="metric-card {{ 'critical' if trust_damage > 70 else 'warning' if trust_damage > 40 else 'normal' }}">
                <div class="metric-number">{{ "%.0f"|format(trust_damage) }}%</div>
                <div class="metric-label">ë¸Œëœë“œ ì‹ ë¢°ë„ ì†ìƒ</div>
                <div class="metric-detail">ê³ ê° ì‹ ë¢° íšŒë³µ í•„ìš”</div>
            </div>
        </div>
    </div>

    <!-- ì¦‰ì‹œ ì¡°ì¹˜ì‚¬í•­ -->
    <div class="urgent-actions">
        <h4>ğŸ¯ ì¦‰ì‹œ ì¡°ì¹˜ì‚¬í•­</h4>
        <div class="actions-timeline">
            {% for action in urgent_actions %}
            <div class="action-item priority-{{ action.priority }}">
                <div class="action-timeline">
                    <div class="action-time">{{ action.timeframe }}</div>
                    <div class="action-priority-badge">{{ action.priority }}</div>
                </div>
                <div class="action-content">
                    <h5>{{ action.title }}</h5>
                    <p>{{ action.description }}</p>
                    {% if action.expected_impact %}
                    <div class="expected-impact">
                        <strong>ì˜ˆìƒ íš¨ê³¼:</strong> {{ action.expected_impact }}
                    </div>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
    </div>

    <!-- í•œëˆˆì— ë³´ëŠ” ìš”ì•½ -->
    <div class="summary-at-glance">
        <h4>ğŸ“Š í•œëˆˆì— ë³´ëŠ” ìš”ì•½</h4>
        <div class="summary-grid">
            <div class="summary-item">
                <strong>í˜„ì¬ ë³´ì•ˆ ë“±ê¸‰</strong>
                <span class="security-grade grade-{{ grade_class }}">{{ security_grade }}</span>
            </div>
            <div class="summary-item">
                <strong>ì£¼ìš” ë¬¸ì œì </strong>
                <span class="issue-count">{{ issues_count }}ê°œ ë°œê²¬</span>
            </div>
            <div class="summary-item">
                <strong>í•´ê²° ì˜ˆìƒ ì‹œê°„</strong>
                <span class="solution-time">{{ estimated_fix_time }}</span>
            </div>
            <div class="summary-item">
                <strong>ì˜ˆìƒ íˆ¬ì ë¹„ìš©</strong>
                <span class="investment-cost">{{ format_currency(estimated_cost) }}</span>
            </div>
        </div>
    </div>
</section>

<style>
/* Executive Summary ìŠ¤íƒ€ì¼ */
.executive-summary {
    background-color: #f8f9fa;
    padding: 25px;
    border-radius: 8px;
    margin-bottom: 30px;
    page-break-inside: avoid;
}

/* ì•Œë¦¼ ë°•ìŠ¤ ìŠ¤íƒ€ì¼ */
.alert {
    display: flex;
    align-items: flex-start;
    padding: 20px;
    border-radius: 8px;
    margin-bottom: 25px;
    page-break-inside: avoid;
}

.alert-icon {
    font-size: 24px;
    margin-right: 15px;
    flex-shrink: 0;
}

.alert-content h3 {
    margin: 0 0 10px 0;
    font-size: 16px;
    font-weight: bold;
}

.alert-content p {
    margin: 0;
    line-height: 1.5;
}

.alert-critical {
    background-color: #f8d7da;
    border: 1px solid #f5c6cb;
    color: #721c24;
}

.alert-warning {
    background-color: #fff3cd;
    border: 1px solid #ffeaa7;
    color: #856404;
}

.alert-success {
    background-color: #d4edda;
    border: 1px solid #c3e6cb;
    color: #155724;
}

.alert-info {
    background-color: #d1ecf1;
    border: 1px solid #bee5eb;
    color: #0c5460;
}

/* ë©”íŠ¸ë¦­ ê·¸ë¦¬ë“œ */
.impact-metrics {
    margin-bottom: 25px;
}

.metrics-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 15px;
    margin-top: 15px;
}

.metric-card {
    background: white;
    padding: 20px;
    border-radius: 6px;
    text-align: center;
    border: 2px solid #e9ecef;
    transition: all 0.3s ease;
}

.metric-card.critical {
    border-color: #dc3545;
    background-color: #fff5f5;
}

.metric-card.warning {
    border-color: #ffc107;
    background-color: #fffdf5;
}

.metric-card.normal {
    border-color: #28a745;
    background-color: #f5fff5;
}

.metric-number {
    font-size: 20px;
    font-weight: bold;
    color: #dc3545;
    margin-bottom: 5px;
}

.metric-card.normal .metric-number {
    color: #28a745;
}

.metric-card.warning .metric-number {
    color: #fd7e14;
}

.metric-label {
    font-size: 12px;
    font-weight: bold;
    color: #495057;
    margin-bottom: 5px;
}

.metric-detail {
    font-size: 10px;
    color: #6c757d;
}

/* ì¡°ì¹˜ì‚¬í•­ íƒ€ì„ë¼ì¸ */
.urgent-actions {
    margin-bottom: 25px;
}

.actions-timeline {
    margin-top: 15px;
}

.action-item {
    display: flex;
    margin-bottom: 15px;
    padding: 15px;
    background: white;
    border-radius: 6px;
    border-left: 4px solid #6c757d;
}

.action-item.priority-critical {
    border-left-color: #dc3545;
}

.action-item.priority-high {
    border-left-color: #fd7e14;
}

.action-item.priority-medium {
    border-left-color: #ffc107;
}

.action-timeline {
    width: 120px;
    flex-shrink: 0;
    margin-right: 15px;
}

.action-time {
    font-size: 11px;
    font-weight: bold;
    color: #495057;
    margin-bottom: 5px;
}

.action-priority-badge {
    display: inline-block;
    padding: 2px 8px;
    border-radius: 4px;
    font-size: 10px;
    font-weight: bold;
    text-transform: uppercase;
    color: white;
    background-color: #6c757d;
}

.priority-critical .action-priority-badge {
    background-color: #dc3545;
}

.priority-high .action-priority-badge {
    background-color: #fd7e14;
}

.priority-medium .action-priority-badge {
    background-color: #ffc107;
    color: #000;
}

.action-content h5 {
    margin: 0 0 5px 0;
    font-size: 14px;
    font-weight: bold;
    color: #333;
}

.action-content p {
    margin: 0 0 8px 0;
    font-size: 12px;
    line-height: 1.4;
}

.expected-impact {
    font-size: 11px;
    color: #28a745;
    font-style: italic;
}

/* ìš”ì•½ ê·¸ë¦¬ë“œ */
.summary-at-glance {
    background: white;
    padding: 20px;
    border-radius: 6px;
    border: 1px solid #e9ecef;
}

.summary-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 15px;
    margin-top: 15px;
}

.summary-item {
    text-align: center;
    padding: 10px;
    border-bottom: 1px solid #e9ecef;
}

.summary-item strong {
    display: block;
    font-size: 11px;
    color: #6c757d;
    margin-bottom: 5px;
    text-transform: uppercase;
}

.summary-item span {
    font-size: 14px;
    font-weight: bold;
    color: #333;
}

.issue-count {
    color: #dc3545;
}

.solution-time {
    color: #17a2b8;
}

.investment-cost {
    color: #28a745;
}

/* ë°˜ì‘í˜• */
@media print {
    .metrics-grid {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .summary-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}
</style>